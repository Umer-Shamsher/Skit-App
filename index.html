<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skit Application</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #f0f8ff;
      color: #333;
    }
    h1, h2, h3 { color: #2e8b57; }
    .section { display: none; margin: 20px 0; }
    .active { display: block; }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }
    button:hover { background-color: #45a049; }
    canvas { border: 1px solid #000; background-color: #fff; border-radius: 50%; }
    .slide { display: none; }
    .slide.active { display: block; }
    #quizImage { max-width: 300px; margin: 10px; }
    #timer { font-size: 24px; color: #ff4500; }
  </style>
</head>
<body>
  <!-- Home Section -->
  <div id="home" class="section active">
    <h1>Skit Application</h1>
    <button onclick="startDemo()">View Demo</button>
    <button onclick="startGame()">Start Game</button>
  </div>

  <!-- Demo Section -->
  <div id="demo" class="section">
    <h2>Game Flow Demo</h2>
    <div id="slides">
      <div class="slide active">
        <h3>Step 1: Introductions</h3>
        <p>Contestants introduce themselves.</p>
      </div>
      <div class="slide">
        <h3>Step 2: Seat Assignment</h3>
        <p>Audience Wheel picks a student.</p>
      </div>
      <div class="slide">
        <h3>Step 3: Game Begins</h3>
        <p>Three rounds with tasks and quizzes.</p>
      </div>
    </div>
    <button onclick="nextSlide()">Next</button>
    <button onclick="backToHome()">Back to Home</button>
  </div>

  <!-- Game Section -->
  <div id="game" class="section">
    <h2>Game</h2>
    <div id="navigation">
      <button onclick="switchSection('audienceWheel')">Audience Wheel</button>
      <button onclick="switchSection('taskRoulette')">Task Roulette</button>
      <button onclick="switchSection('rapidQuiz')">Rapid Quiz</button>
      <button onclick="backToHome()">Back to Home</button>
    </div>
    <div id="audienceWheel" class="section active">
      <h3>Audience Wheel</h3>
      <canvas id="wheelCanvas" width="300" height="300"></canvas>
      <p id="selectedStudent"></p>
      <button onclick="drawStudent()">Draw Student</button>
    </div>
    <div id="taskRoulette" class="section">
      <h3>Task Roulette</h3>
      <button onclick="selectTask('easy')">Easy Task</button>
      <button onclick="selectTask('hard')">Hard Task</button>
      <p id="taskResult"></p>
    </div>
    <div id="rapidQuiz" class="section">
      <h3>Rapid Fire Quiz</h3>
      <img id="quizImage" src="" alt="Quiz Image">
      <p id="quizQuestion"></p>
      <div id="quizOptions"></div>
      <p id="timer"></p>
    </div>
  </div>

  <script>
    // Data
    const students = ["Fiza", "Komal", "Vaniza", "Rafey", "Kumail", "Mustafa"];
    const easyTasks = ["Say 'Bonjour'", "Name a French animal"];
    const hardTasks = ["Say a tongue twister", "Act out 'I am sleeping'"];
    const quizQuestions = [
      { image: "images/image1.png", question: "What day is it?", answer: "lundi", options: ["lundi", "mardi"] },
      { image: "images/image2.png", question: "What month is cold?", answer: "janvier", options: ["janvier", "juillet"] }
    ];

    // Section Management
    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
    }

    // Demo Functions
    let currentSlide = 0;
    const slides = document.querySelectorAll('#slides .slide');
    function startDemo() {
      showSection('demo');
      currentSlide = 0;
      showSlide(currentSlide);
    }
    function showSlide(index) {
      slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
    }
    function nextSlide() {
      currentSlide = (currentSlide + 1) % slides.length;
      showSlide(currentSlide);
    }
    function backToHome() {
      showSection('home');
    }

    // Game Functions
    function startGame() {
      showSection('game');
      switchSection('audienceWheel');
    }
    function switchSection(sectionId) {
      document.querySelectorAll('#game .section').forEach(s => s.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
      if (sectionId === 'rapidQuiz') loadQuiz();
    }

    // Audience Wheel
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    let availableStudents = [...students];
    function drawStudent() {
      if (availableStudents.length === 0) {
        document.getElementById('selectedStudent').innerText = "No students left!";
        return;
      }
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      ctx.arc(150, 150, 140, 0, Math.PI * 2);
      ctx.stroke();
      ctx.fillText("Spinning...", 120, 150);
      setTimeout(() => {
        const index = Math.floor(Math.random() * availableStudents.length);
        const student = availableStudents.splice(index, 1)[0];
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillText(student, 120, 150);
        document.getElementById('selectedStudent').innerText = `Selected: ${student}`;
      }, 1000);
    }

    // Task Roulette
    function selectTask(type) {
      const tasks = type === 'easy' ? easyTasks : hardTasks;
      const task = tasks[Math.floor(Math.random() * tasks.length)];
      document.getElementById('taskResult').innerText = `Task: ${task}`;
    }

    // Rapid Fire Quiz
    let currentQuiz = 0;
    function loadQuiz() {
      if (currentQuiz >= quizQuestions.length) {
        document.getElementById('quizQuestion').innerText = "No more questions!";
        return;
      }
      const q = quizQuestions[currentQuiz];
      document.getElementById('quizImage').src = q.image;
      document.getElementById('quizQuestion').innerText = q.question;
      document.getElementById('quizOptions').innerHTML = q.options
        .map(opt => `<button onclick="checkAnswer('${opt}', '${q.answer}')">${opt}</button>`).join('');
      let timeLeft = 10;
      document.getElementById('timer').innerText = `Time: ${timeLeft}s`;
      const timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = `Time: ${timeLeft}s`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          document.getElementById('quizOptions').innerText = `Answer: ${q.answer}`;
          currentQuiz++;
          setTimeout(loadQuiz, 2000);
        }
      }, 1000);
    }
    function checkAnswer(selected, correct) {
      document.getElementById('quizOptions').innerText = selected === correct ? "Correct!" : `Wrong! Answer: ${correct}`;
      currentQuiz++;
      setTimeout(loadQuiz, 2000);
    }
  </script>
</body>
</html>
